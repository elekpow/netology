# Домашнее задание к занятию "Regexp и его использование для синтаксического анализа"

------

### Задание 1.

Напишите регулярное выражение для проверки является ли строка `IPv4` адресом.

Для тестов можно использовать файл со следующим содержимым, фильтруя вывод с помощью команды `grep -E`:
```
192.168.0.1
127.0.0.1
84.345.23.11
88.3A.56.76
224.12.76
```

*Пришлите получившееся выражение в качестве ответа.*

---

**Выполнение задания 1.**

```
192.168.0.1
127.0.0.1
84.345.23.11
88.3A.56.76
224.12.76
```

 * регулярное выражение

```
^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$
```


![img7.jpg](https://github.com/elekpow/netology/blob/main/bash/images/img7.jpg)

---

### Задание 2.

В Вашей конфигурации Nginx скопилось много неиспользуемых сегментов и становится сложно его читать.

Используя `sed` удалите все пустые строки и комментарии в конфигурации Nginx.

Попробуйте сделать это одним запуском.

---

**Выполнение задания 2.**


` cat nginx.conf | sed -E '/^[[:blank:]]*$/d; /#/d'`

![img8.jpg](https://github.com/elekpow/netology/blob/main/bash/images/img8.jpg)


------

### Задание 3.

Используя `awk` и `ps aux` соберите информацию о:
 - количестве процессов для каждого пользователя;
 - процессе с самым большим PID;
 - (дополнительное задание со звездочкой*) суммарном использовании памяти различными пользователями.

* Пришлите скриншоты со скриптами и демонстрацией их работы

---

**Выполнение задания 3.**


* вывести количество процессов для каждого пользователя:

`ps aux | awk '{print $1}' | sort | uniq -c`

(отсортировать список - sort , и подсчитать количество процессов для каждого уникального имени пользователя  - uniq -c)


![img9.jpg](https://github.com/elekpow/netology/blob/main/bash/images/img9.jpg)


* найти процесс с самым большим PID:

`ps aux | awk '{print $2, $11}' | sort -rn | head -n 1`

вывести только первую строку (процесс с самым большим PID) - head -n 1 

* head c самым большим PID 

![img10.jpg](https://github.com/elekpow/netology/blob/main/bash/images/img10.jpg)


* Суммарное использование памяти различными пользователями:

`ps aux | awk '{names[$1] += $4} END {for (i in names) print i, names[i]}' | sort -k2rn`

![img11.jpg](https://github.com/elekpow/netology/blob/main/bash/images/img11.jpg)


* сохраняем массив names суммарное использование памяти $4 для каждого уникального имени  пользователя $1,   и  через цикл выводим имена пользователей и это значение, затем сортируем список по максимальному значению. (sort -k2rn ) - 2 столбец


---


### Задание 4.

Напишите bash-скрипт который собирает информацию о системе и пишет ее в лог каждые 5 секунд.

Используемые параметры:

- loadavg[1,5,15] средний показатель загрузки ЦПУ за последние 1 5 и 15 минут. *Примечание:* хранится в `/proc/loadavg`.
- memfree количество свободной оперативной памяти в байтах. *Примечание:* используем утилиту `free`.
- memtotal количество всей оперативной памяти в байтах. *Примечание:* используем утилиту `free`.
- diskfree свободное место на диске подключенного к /. *Примечание:* используем утилиту `df`.
- disktotal общий объем диска подключенного к /. *Примечание:* используем утилиту `df`.

***Формат записи:*** `timestamp loadavg1 loadavg5 loadavg15 memfree memtotal diskfree disktotal`

Пособирайте данные в течении 5-10 минут.

Анализируя этот лог с помощью `awk` напишите скрипт проверки состояния системы с заданными условиями:

- `loadavg1 < 1` в течении последних 2 минут;
- `memfree / memtotal < 60%` в течении последних 3 минут;
- `diskfree / disktotal < 60%` в течении последних 5 минут.

Скрипт должен возвращать 0 код ответа, если все условия выполняются, и любой другой в случае невыполнения.

В консоль также необходимо выводить, какое именно из условий не выполняется.

*Пришлите получившиеся скрипты в качестве ответа.*

---

**Выполнение задания 4.**

------

